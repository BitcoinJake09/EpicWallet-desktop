<!-- Settings Form -->
<div class="settings-content">
    <form class="form-horizontal" id="settings-form" data-toggle="validator" role="form">
    <div class="row">

        <!-- Wallet Information -->
        <div class="col-xs-12 col-sm-6">
            <fieldset>
                <legend><i class="fa fa-bitcoin"></i> Wallet Information</legend>
                <div class="form-group">
                    <label for="passphrase" class="col-sm-3 control-label no-right-padding">
                        Passphrase
                        <a href="#" data-toggle="tooltip" title='This is the 12-word passphrase that enables you to access all your funds' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                        <div class="input-group">
                            <input type="password" class="form-control" name="passphrase" id="passphrase" placeholder="Current Passphrase" value="word word word word word word word word word word word word" readonly>
                            <a href="#" class="input-group-addon" id="settings-passphrase"><i class="fa fa-eye"></i></a>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="address" class="col-sm-3 control-label no-right-padding">
                        Address
                        <a href="#" data-toggle="tooltip" title='This is the current wallet address' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                        <div class="input-group">
                            <input type="text" class="form-control" name="address"  id="settings-address" placeholder="Current Address" readonly>
                            <a class="input-group-addon" id="settings-address-icon"><i class="fa fa-edit"></i></a>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="settings-address-label" class="col-sm-3 control-label no-right-padding">
                        Label
                        <a href="#" data-toggle="tooltip" title='This is the name or label you would like to use for the current address' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" name="settings-address-label"  id="settings-address-label" placeholder="Address Label">
                    </div>
                </div>
                <div class="form-group">
                    <label for="network" class="col-sm-3 control-label no-right-padding">
                        Network
                        <a href="#" data-toggle="tooltip" title='This determines which bitcoin network you would prefer to use' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                </label>
                    <select class="col-sm-9 selectpicker" name="network" id="settings-network">
                        <option value="1">Bitcoin Core (Mainnet)</option>
                        <option value="2">Bitcoin Core (Testnet)</option>
                    </select>
                </div>                
            </fieldset>
        </div>

        <!-- General Information -->
        <div class="col-xs-12 col-sm-6">
            <fieldset>
                <legend><i class="fa fa-gears"></i> General Information</legend>
                <div class="form-group">
                    <label for="current-theme" class="col-sm-3 control-label no-right-padding">
                        Theme
                        <a href="#" data-toggle="tooltip" title='This is the current theme being used' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <select class="col-sm-9 selectpicker" name="current-theme"  id="current-theme">
                        <option>Default</option>
                        <option>Coming soon...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="current-currency" class="col-sm-3 control-label no-right-padding">
                        Currency
                        <a href="#" data-toggle="tooltip" title='This is the current currency being used to display fiat values' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <select class="col-sm-9 selectpicker" name="current-currency"  id="current-currency">
                        <option data-icon="fa fa-usd">US Dollar</option>
                        <option>Coming soon...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="current-language" class="col-sm-3 control-label no-right-padding">
                        Language
                        <a href="#" data-toggle="tooltip" title='This is the current language being used in the wallet' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <select class="col-sm-9 selectpicker"  name="current-language" id="current-language">
                        <option>English</option>
                        <option>Coming soon...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="current-priority" class="col-sm-3 control-label no-right-padding">
                        Fee Priority
                        <a href="#" data-toggle="tooltip" title='This is the default fee priority that you would like to use' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <select class="col-sm-9 selectpicker" name="current-priority" id="current-priority">
                        <option>High</option>
                        <option>Medium</option>
                        <option>Low</option>
                        <option>Custom</option>
                    </select>
                </div>                
            </fieldset>            
        </div>

    </div>

    <div class="row" id="server-settings-wrapper" style="margin-top: 15px">
        <!-- Server Settings (Mainnet) -->
        <div class="col-xs-12 col-sm-6">
            <fieldset>
                <legend><i class="fa fa-server"></i> Mainnet Server Information</legend>
                <div class="form-group">
                    <label for="mainnet-cp-host" class="col-sm-3 control-label no-right-padding">
                        CP Host
                        <a href="#" data-toggle="tooltip" title='This is the hostname where the Counterparty API can be accessed' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" name="mainnet-cp-host" id="mainnet-cp-host" placeholder="public.coindaddy.io" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="mainnet-cp-port" class="col-sm-3 control-label no-right-padding">
                        CP Port
                        <a href="#" data-toggle="tooltip" title='This is the port to use when communicating with the Counterparty API' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" name="mainnet-cp-port" id="mainnet-cp-port" placeholder="4000" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="mainnet-cp-user" class="col-sm-3 control-label no-right-padding">
                        CP User
                        <a href="#" data-toggle="tooltip" title='This is the username used to authenticate to the Counterparty API' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" name="mainnet-cp-user" id="mainnet-cp-user" placeholder="rpc" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="mainnet-cp-pass" class="col-sm-3 control-label no-right-padding">
                        CP Pass
                        <a href="#" data-toggle="tooltip" title='This is the password used to authenticate to the Counterparty API' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" name="mainnet-cp-pass" id="mainnet-cp-pass" placeholder="1234" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="mainnet-cp-ssl" class="col-sm-3 control-label no-right-padding">
                        Use SSL
                        <a href="#" data-toggle="tooltip" title='This determines if requests to the Counterparty API use http or https (ssl)' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <select class="col-sm-9 selectpicker" name="mainnet-cp-ssl" id="mainnet-cp-ssl">
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </fieldset>
        </div>

        <!-- Server Settings (testnet) -->
        <div class="col-xs-12 col-sm-6">
            <fieldset>
                <legend><i class="fa fa-server"></i> Testnet Server Information</legend>
                <div class="form-group">
                    <label for="testnet-cp-host" class="col-sm-3 control-label no-right-padding">
                        CP Host
                        <a href="#" data-toggle="tooltip" title='This is the hostname where the Counterparty API can be accessed' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" name="testnet-cp-host" id="testnet-cp-host" placeholder="public.coindaddy.io" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="testnet-cp-port" class="col-sm-3 control-label no-right-padding">
                        CP Port
                        <a href="#" data-toggle="tooltip" title='This is the port to use when communicating with the Counterparty API' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" name="testnet-cp-port" id="testnet-cp-port" placeholder="14000" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="testnet-cp-user" class="col-sm-3 control-label no-right-padding">
                        CP User
                        <a href="#" data-toggle="tooltip" title='This is the username used to authenticate to the Counterparty API' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" name="testnet-cp-user" id="testnet-cp-user" placeholder="rpc" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="testnet-cp-pass" class="col-sm-3 control-label no-right-padding">
                        CP Pass
                        <a href="#" data-toggle="tooltip" title='This is the password used to authenticate to the Counterparty API' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" name="testnet-cp-pass" id="testnet-cp-pass" placeholder="1234" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="testnet-cp-ssl" class="col-sm-3 control-label no-right-padding">
                        Use SSL
                        <a href="#" data-toggle="tooltip" title='This determines if requests to the Counterparty API use http or https (ssl)' class="pull-right"><i class="fa fa-lg fa-question-circle-o margin-top-5" ></i></a>
                    </label>
                    <select class="col-sm-9 selectpicker" name="testnet-cp-ssl" id="testnet-cp-ssl">
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </fieldset>
        </div>
    </div>
    </form>
<br/><br/>
</div>

<script>
$(document).ready(function(){
    var ls = localStorage,
        ss = sessionStorage;

    // Load the wallet address information
    $('#settings-address').val(FW.WALLET_ADDRESS);
    $('#settings-network').val(FW.WALLET_NETWORK);
    $('#settings-address-label').val(FW.WALLET_ADDRESS_LABEL);

    // Populate the server info fields
    var o = FW.WALLET_SERVER_INFO.mainnet;
    $('#mainnet-cp-host').val(o.host);
    $('#mainnet-cp-port').val(o.port);
    $('#mainnet-cp-user').val(o.user);
    $('#mainnet-cp-pass').val(o.pass);
    $('#mainnet-cp-ssl').val((o.ssl) ? 1 : 0);
    var o = FW.WALLET_SERVER_INFO.testnet;
    $('#testnet-cp-host').val(o.host);
    $('#testnet-cp-port').val(o.port);
    $('#testnet-cp-user').val(o.user);
    $('#testnet-cp-pass').val(o.pass);
    $('#testnet-cp-ssl').val((o.ssl) ? 1 : 0);

    // Initialize any tooltips
    $('[data-toggle="tooltip"]').tooltip({ 
        html: true,
        placement: 'bottom'
    }); 

    // Detect any server settings changes and treat as if user submited form
    $('#server-settings-wrapper input').change(function(){
        $('#settings-form').submit();
    });

    // Set fee priority based on current value
    var val = ls.getItem('feePriority') || 'High';
    $('#current-priority').val(val);

    // Make any selects look nicer by using dialog-select
    $('.selectpicker').selectpicker({
        style: 'btn-default btn-block',
        size: 4
    });

    // Save fee priority when it changes
    $('#current-priority').change(function(e){
        var val = $(this).val();
        ls.setItem('feePriority', val);
    });

    // Handle form validation
    $('#settings-form').validator().on('submit', function(e){
        // handle the invalid form...
        if(e.isDefaultPrevented()){
            dialogMessage('<i class="fa fa-lg fa-fw fa-info-circle"></i> Error', 'Please fill out all required fields indicated in red.');
        } else {
            e.preventDefault();
            // Loop through form data and build out data array
            var arr  = $(this).serializeArray(),
                data = {};
            $(arr).each(function(index, obj){
                data[obj.name] = obj.value;
            });
            // Update server information
            var o = {
                mainnet: {
                    host: data['mainnet-cp-host'],
                    port: data['mainnet-cp-port'],
                    user: data['mainnet-cp-user'],
                    pass: data['mainnet-cp-pass'],
                    pass: data['mainnet-cp-pass'],
                    ssl: (data['mainnet-cp-ssl']=='1') ? true : false                   
                },
                testnet: {
                    host: data['testnet-cp-host'],
                    port: data['testnet-cp-port'],
                    user: data['testnet-cp-user'],
                    pass: data['testnet-cp-pass'],
                    pass: data['testnet-cp-pass'],
                    ssl: (data['testnet-cp-ssl']=='1') ? true : false                   
                }
            }
            // Save updated server information
            FW.WALLET_SERVER_INFO = o;
            ls.setItem('serverInfo',JSON.stringify(o));
            // dialogMessage('<i class="fa fa-lg fa-fw fa-info-circle"></i> Information Saved', 'Your server information has been successfully saved.');
        }
    });

    // Show change/edit address list form when user clicks the edit icon
    $('#settings-address-icon').click($.debounce(100,function(e){
        dialogChangeAddress();
    }));

    // Show change/edit address list form when user clicks the qrcode/address 
    $('#settings-address-label').change(function(e){
        var label = $(this).val();
        setWalletAddressLabel(FW.WALLET_ADDRESS, label);
        dialogMessage('<i class="fa fa-lg fa-fw fa-floppy-o"></i> Address Label Saved', 'Your address label information has been successfully saved.');
    });

    // Show passphrase dialog box when user clicks passphrase view button
    $('#settings-passphrase').click($.debounce(100,function(e){
        // Make sure wallet is unlocked
        if(dialogCheckLocked('view your wallet passphrase'))
            return;
        dialogPassphrase();
    }));

    // Handle updating the network
    $('#settings-network').change(function(){
        // Make sure wallet is unlocked
        if(dialogCheckLocked('change wallet networks'))
            return;
        var net = $(this).val();
        setWalletNetwork(net);
    });

});
</script>